function getColor_pc(e){return e>500?"#d73027":e>400?"#fc8d59":e>300?"#fee090":e>200?"#ffffbf":e>100?"#e0f3f8":e>0?"#91bfdb":null===e?"transparent":"#4575b4"}function getColor_m2(e){return e>25e3?"#d73027":e>2e4?"#fc8d59":e>15e3?"#fee090":e>1e4?"#ffffbf":e>5e3?"#e0f3f8":e>0?"#91bfdb":null===e?"transparent":"#4575b4"}function style_fsr_pc(e){return{fillColor:getColor_pc(e.properties.tp_rating_layer_1_fsr_upside_pc),weight:1,opacity:1,color:"silver",fillOpacity:.9}}function style_fsr_m2(e){return{fillColor:getColor_m2(e.properties.tp_rating_layer_2_fsr_upside_m2),weight:1,opacity:1,color:"silver",fillOpacity:.9}}function highlightFeature(e){var t=e.target;if(t.setStyle({weight:3,color:"#666",dashArray:"",fillOpacity:.7}),e&&e.target.feature.properties.tp_street_address){const i=e.target.feature.properties.tp_street_address;t.bindTooltip(i).openTooltip()}L.Browser.ie||L.Browser.opera||L.Browser.edge||t.bringToFront(),info.update(t.feature.properties)}function resetHighlight(e){themeFSR_pc.resetStyle(e.target),themeFSR_m2.resetStyle(e.target),info.update()}function zoomToFeature(e){map.fitBounds(e.target.getBounds())}function onEachFeature(e,t){t.on({mouseover:highlightFeature,mouseout:resetHighlight,click:zoomToFeature,dblclick:highlightFeature})}const mapboxAccessToken="token-here",icon=L.icon({iconUrl:"images/skyscraper.png",iconSize:[42,64]}),precinctNorthSydney=L.marker([-33.8388,151.2069],{icon:icon,title:"North Sydney"}).on("click",function(e){map.setView(e.latlng,17)}),precinctSydney=L.marker([-33.8634,151.208],{icon:icon,title:"Sydney"}).on("click",function(e){map.setView(e.latlng,17)}),precinctStLeonards=L.marker([-33.8245,151.198],{icon:icon,title:"St Leonards"}).on("click",function(e){map.setView(e.latlng,17)}),precinctChatswood=L.marker([-33.7968,151.18],{icon:icon,title:"Chatswood"}).on("click",function(e){map.setView(e.latlng,17)}),precincts=L.layerGroup([precinctChatswood,precinctNorthSydney,precinctStLeonards,precinctSydney]),precinctsBounds=L.featureGroup([precinctChatswood,precinctNorthSydney,precinctStLeonards,precinctSydney]),grayscale=L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token="+mapboxAccessToken,{id:"mapbox/light-v10",attribution:'<a href="https://findnearest.com">FindNearest.com</a> | &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> | &copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> <a href="https://www.mapbox.com/map-feedback/"><b>Improve this map</b></a>',tileSize:512,zoomOffset:-1}),streets=L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token="+mapboxAccessToken,{id:"mapbox/streets-v11",attribution:'<a href="https://findnearest.com">FindNearest.com</a> | &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> | &copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> <a href="https://www.mapbox.com/map-feedback/"><b>Improve this map</b></a>',tileSize:512,zoomOffset:-1}),imagery=L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token="+mapboxAccessToken,{id:"mapbox/satellite-v9",attribution:'<a href="https://findnearest.com">FindNearest.com</a> | &copy; <a href="https://www.digitalglobe.com/">DigitalGlobe</a> | &copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> <a href="https://www.mapbox.com/map-feedback/"><b>Improve this map</b></a>',tileSize:512,zoomOffset:-1}),parcels=L.geoJson(parcelData),themeFSR_pc=L.geoJson(parcelData,{style:style_fsr_pc,onEachFeature:onEachFeature}),themeFSR_m2=L.geoJson(parcelData,{style:style_fsr_m2,onEachFeature:onEachFeature}),baseMaps={Grayscale:grayscale,Streets:streets,Imagery:imagery},overlayMaps={"FSR upside %":themeFSR_pc,"FSR upside m<sup>2</sup>":themeFSR_m2,Precincts:precincts},map=L.map("map",{layers:[grayscale,themeFSR_pc,precincts]});map.fitBounds(parcels.getBounds()),L.control.layers(baseMaps,overlayMaps,{collapsed:!1}).addTo(map);const legendFSR_PC=L.control({position:"bottomright"});legendFSR_PC.onAdd=function(e){var t=L.DomUtil.create("div","info legend"),i=[-100,-.01,100,200,300,400,500],n=["-100","0","100","200","300","400","500"];t.innerHTML="<h4>FSR %</h4>";for(var a=0;a<i.length;a++)t.innerHTML+='<i style="background:'+getColor_pc(i[a]+1)+'"></i> '+n[a]+(n[a+1]?"&ndash;"+n[a+1]+"%<br>":"+");return t};const legendFSR_m2=L.control({position:"bottomright"});legendFSR_m2.onAdd=function(e){var t=L.DomUtil.create("div","info legend"),i=[-100,-.01,5e3,1e4,15e3,2e4,25e3],n=["-100","0","5000","10000","15000","20000","25000"];t.innerHTML="<h4>FSR m<sup>2</sup></h4>";for(var a=0;a<i.length;a++)t.innerHTML+='<i style="background:'+getColor_m2(i[a]+1)+'"></i> '+n[a]+(n[a+1]?"&ndash;"+n[a+1]+"m<sup>2</sup><br>":"+");return t},legendFSR_PC.addTo(map),map.on("overlayadd",function(e){"FSR %"===e.name?(this.removeControl(legendFSR_m2),legendFSR_PC.addTo(this)):(this.removeControl(legendFSR_PC),legendFSR_m2.addTo(this))});let info=L.control(),info_container=document.getElementById("fn_info");info.onAdd=function(e){return this._div=L.DomUtil.create("div","info",info_container),this.update(),this._div},info.update=function(e){e?null!=e.tp_street_address?info_container.innerHTML=e?"<h3>"+e.tp_street_address+'</h3><h4>Net Lettable Area (m<sup>2</sup>)</h4><div class="fn_flex_container"><div class="fn_flex_item">Existing NLA</div><div class="fn_flex_item">'+e.tp_existing_nla.toFixed(0)+'</div></div><div class="fn_flex_container"><div class="fn_flex_item">Potential NLA</div><div class="fn_flex_item">'+e.tp_potential_nla.toFixed(0)+'</div></div><div class="fn_flex_container"><div class="fn_flex_item">Rating FSR upside</div><div class="fn_flex_item">'+e.tp_rating_layer_2_fsr_upside_m2.toFixed(0)+'</div></div><h4>Floor Space Ratio</h4><div class="fn_flex_container"><div class="fn_flex_item">Built FSR</div><div class="fn_flex_item">'+e.tp_built_fsr_nla.toFixed(1)+' : 1</div></div><div class="fn_flex_container"><div class="fn_flex_item">Potential FSR (NLA)</div><div class="fn_flex_item">'+e.tp_potential_fsr_nla.toFixed(1)+' : 1</div></div><div class="fn_flex_container"><div class="fn_flex_item">Rating FSR upside (%)</div><div class="fn_flex_item">'+e.tp_rating_layer_1_fsr_upside_pc.toFixed(1)+'</div></div><h4>General</h4><div class="fn_flex_container"><div class="fn_flex_item">Site Area (m<sup>2</sup>)</div><div class="fn_flex_item">'+e.tp_site_area.toFixed(0)+'m<sup>2</sup></div></div><div class="fn_flex_container"><div class="fn_flex_item">Grade</div><div class="fn_flex_item">'+e.tp_building_grade+'</div></div><div class="fn_flex_container"><div class="fn_flex_item">Zoning</div><div class="fn_flex_item">'+e.tp_zoning+'</div></div><div class="fn_flex_container"><div class="fn_flex_item">Owner</div><div class="fn_flex_item">'+e.tp_owner+'</div></div><div class="fn_flex_container fn_description"><div class="fn_flex_item ">Description</sup></div><div class="fn_flex_item">'+e.tp_description+"</div></div>":"Hover over a parcel.":info_container.innerHTML=fn_nodata:info_container.innerHTML=fn_instructions};const fn_nodata='<div class="fn_warning">No data for selected parcel.</div>',fn_instructions='<div class="fn_warning"><ul><li>On desktop, hover over any parcel.</li><li>On mobile, double-tap to get information for selected parcel.</li></ul></div>';info.addTo(map);